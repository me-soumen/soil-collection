<!DOCTYPE html>
<html>
  <link rel="stylesheet" href="css/home-page.css" />
  <link rel="stylesheet" href="css/style.css" />
<head>
  <meta charset="UTF-8">
  <title>State Details</title>
</head>

<body>

  <h1>State Details</h1>
  <div id="result">Loading...</div>
  <div class="tiles-container" id="tilesContainer"></div>


  <a href="pages/add.html">Add or Update State</a>

  <script>
    // const states = [
    //   {
    //     "code": "KA",
    //     "state": "Karnataka",
    //     "place": "Hogenakkal Falls",
    //     "date": "1850-09-09",
    //     "time": "10:00 AM",
    //     "latitude": 36.7783,
    //     "longitude": -119.4179,
    //     "notes": "Awesome Destination"
    //   },
    //   {
    //     "code": "KL",
    //     "state": "Kerala",
    //     "place": "Kannur",
    //     "date": "1845-12-29",
    //     "time": "10:00 AM",
    //     "latitude": 31.9686,
    //     "longitude": -99.9018,
    //     "notes": "Nice Trip"
    //   },
    //   {
    //     "code": "WB",
    //     "state": "West Bengal",
    //     "place": "Durgapur",
    //     "date": "1845-03-03",
    //     "time": "10:00 AM",
    //     "latitude": 27.9944,
    //     "longitude": -81.7603,
    //     "notes": "Hey"
    //   },
    //   {
    //     "code": "JH",
    //     "state": "Jharkhand",
    //     "place": "Durgapur",
    //     "date": "1845-03-03",
    //     "time": "10:00 AM",
    //     "latitude": 27.9944,
    //     "longitude": -81.7603,
    //     "notes": "Hey"
    //   }
    // ]
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    async function loadStateDetails() {
      var baseURL = "https://maps.google.com/?q=";
      try {
      const response = await fetch('database/states.json');
      const states = await response.json();
      console.log(states);

      if (states) {

        const container = document.getElementById('tilesContainer');
        states.map((state) => {
          const tile = document.createElement('div');
          tile.className = 'flip-tile';
          const mapURL = baseURL + state.latitude + "," + state.longitude;
          console.log(mapURL);
          tile.innerHTML = `
            <div class="flip-inner">
              <div class="flip-front">
                <h2>${state.state}</h2>
              </div>
              <div class="flip-back">
                  <span><strong>State Code:</strong> ${state.code}</span>
                  <span><strong>Place:</strong> ${state.code}</span>
                  <span><strong>Date:</strong> ${state.date}</span>
                  <span><strong>Time:</strong> ${state.time}</span>
                  <span><strong>Notes:</strong> ${state.notes}</span>
                  <span><strong>Location:</strong> <a href="${mapURL}" target="_blank">Open in Map</a></span>
              </div>
            </div>`;
          container.appendChild(tile);
        })
      } else {
        document.getElementById('result').innerText = 'State not found in the data.';
      }

      } catch (error) {
        document.getElementById('result').innerText = 'Error loading state data.';
        console.error(error);
      }
    }

    loadStateDetails();
  </script>

</body>

</html>